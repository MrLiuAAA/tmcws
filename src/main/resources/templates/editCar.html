<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>修改设备</title>
<script th:src="@{/js/jquery-1.11.1.min.js}" type="text/javascript"></script>
<link th:href="@{/css/EditGuard.css}" rel="stylesheet" type="text/css" />
<link th:href="@{/css/PersonalInfo.css}" rel="stylesheet"
	type="text/css" />
<style>
input {
	vertical-align: middle;
}
</style>
</head>

<body>


	<div id="div-left">
		<a class="backBtn" th:href="@{/backstage/carManage}">
			<img width="30px" height="36px" th:src="@{/images/back.png}" />
		</a> 
		<a class="backBtn" href="#" th:onclick="'saveCar('+${car.sn}+')'"> 
			<img width="35px" height="35px" th:src="@{/images/save.png}" />
		</a>
	</div>
	<div id="div-right">
		<div class="GuardItem">
			<div class="ItemLeft">车辆名称</div>
			<div class="ItemRight">
				<span></span><input id="carName" type="text" th:value="${car.name}" />
			</div>
		</div>
		<div class="GuardItem">
			<div class="ItemLeft">设备码</div>
			<div class="ItemRight">
				<span></span><input type="text" disabled="disabled" th:value="${car.sn}" />
			</div>
		</div>

	</div>

</body>
<script>
		function saveCar(sn){
			
			var carName =$.trim($("#carName").val());
			
			if(carName==''){
				alert('名字不能为空');
				return;
			}
			
			$.ajax({
				type : 'POST',
				url : '/backstage/changeStatus',
				data : {
					'status' :carName,
					'sn' : sn,
					'fieldName' : 'name'
				},
				dataType : 'json',
				success : function(data, textStatus) {
					var result = data.result;
					if ("success" != result) { // 如果登录不成功，则再次刷新验证码
						alert(result);
					} else {
						window.location.href = "/backstage/carManage";
					}
				}
			});
		}
		
		
</script>
</html>
